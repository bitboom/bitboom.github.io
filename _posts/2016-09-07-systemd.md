---
layout: post
title:  systemd
tags: [systemd] 
---

linux runlevel
http://kateee.tistory.com/51
http://unix.stackexchange.com/questions/47695/how-to-write-startup-script-for-systemd

https://www.freedesktop.org/software/systemd/man/systemd.socket.html#
socket이란?
A unit configuration file whose name ends in ".socket" encodes information
about an IPC or network socket or a file system FIFO controlled and
supervised by systemd, for socket-based activation.

https://www.freedesktop.org/software/systemd/man/systemd.unit.html#
unit이란? 
systemd.unit — Unit configuration
A unit configuration file encodes information about a service, a socket,
a device, a mount point, an automount point, a swap file or partition,
a start-up target, a watched file system path, a timer controlled and supervised by systemd(1),
a resource management slice or a group of externally created processes.

The syntax is inspired by XDG Desktop Entry Specification .desktop files,
which are in turn inspired by Microsoft Windows .ini files.

[Unit] Section Options
Wants=
Before=
After=

WantsBy=
Example 1. Allowing units to be enabled
The following snippet (highlighted) allows a unit (e.g. foo.service) to be enabled via systemctl enable:

[Unit]
Description=Foo

[Service]
ExecStart=/usr/sbin/foo-daemon

[Install]
WantedBy=multi-user.target
After running systemctl enable, a symlink /etc/systemd/system/multi-user.target.wants/foo.service linking 
to the actual unit will be created. It tells systemd to pull in the unit when starting multi-user.target.
The inverse systemctl disable will remove that symlink again.

https://www.freedesktop.org/software/systemd/man/systemd.socket.html#


Socket units will have a Before= dependency on the service which they trigger added implicitly.
No implicit WantedBy= or RequiredBy= dependency from the socket to the service is added. This means
that the service may be started without the socket, in which case it must be able to open sockets by itself.
To prevent this, an explicit Requires= dependency may be added.
Socket units may be used to implement on-demand starting of services, as well as parallelized starting of services.
See the blog stories linked at the end for an introduction.


http://0pointer.de/blog/projects/inetd.html

Most of this should be self-explanatory. A few notes: Accept=yes corresponds to nowait. It's hopefully better named,
referring to the fact that for nowait the superserver calls accept() on the listening socket, where for wait this is
the job of the executed service process. WantedBy=sockets.target is used to ensure that when enabled this unit is activated
 at boot at the right time.
